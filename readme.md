üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (Docker)
–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

Docker + Docker Compose

–ó–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∫–ª—é—á–∏ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (API-–∫–ª—é—á–∏ –∏ –¥–æ—Å—Ç—É–ø—ã –∫ –ë–î –≤ local.neon/env)

–°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫

sudo docker compose build
sudo docker compose up -d

–û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
‚Üí http://localhost

sudo docker compose exec app curl -s http://selenium:4444/status

–ü—Ä–∞–≤–∞ –¥–ª—è –ª–æ–≥–æ–≤/–∫—ç—à–∞ (–Ω—É–∂–Ω–æ –∏ –ª–æ–∫–∞–ª—å–Ω–æ, –∏ –Ω–∞ —Ö–æ—Å—Ç–∏–Ω–≥–µ)
sudo chmod -R 0777 ./log ./temp ./www


üíæ –û—Å–Ω–æ–≤–Ω–æ–π —Å—Ü–µ–Ω–∞—Ä–∏–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

–ó–∞–π–¥–∏—Ç–µ –Ω–∞ http://localhost

–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ä–µ–∑—é–º–µ —á–µ—Ä–µ–∑ —Ñ–æ—Ä–º—É (upload).

–î–∞–Ω–Ω—ã–µ –∏–∑ —Ä–µ–∑—é–º–µ –±—É–¥—É—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö.

–ü—Ä–∏ –∑–∞–ø—É—â–µ–Ω–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ –≤ Docker, –ø–∞—Ä—Å–∏–Ω–≥ –∏ –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ –∫—Ä–æ–Ω—É –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤.

–ö—Ä–æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ñ–æ–Ω–µ, –≤—Ä—É—á–Ω—É—é –Ω–∏—á–µ–≥–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –Ω–µ –Ω—É–∂–Ω–æ.

üß† –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ (embeddings –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä)

–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –≤—Ä—É—á–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Å–∞–π—Ç/–∑–∞–¥–∞—á—É:

docker exec -it portfolio-embeddings-1 sh
# –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:
# –≤—ã–±–µ—Ä–∏—Ç–µ –Ω—É–∂–Ω—ã–π —Å–∞–π—Ç/–∑–∞–¥–∞—á—É –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –æ–¥–Ω–æ–∏–º—ë–Ω–Ω—ã–π .py —Ñ–∞–π–ª, –Ω–∞–ø—Ä–∏–º–µ—Ä:
python mysite.py


–ò–º–µ–Ω–∞ —Ñ–∞–π–ª–æ–≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —Å–∞–π—Ç–∞–º/–ø—Ä–æ—Ü–µ—Å—Å–∞–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, example_com.py –∏ —Ç.–ø.).

üîß –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å:
sudo docker compose down


–ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π:
sudo docker compose build
sudo docker compose up -d


–õ–æ–≥–∏ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:
sudo docker compose logs -f app


–õ–æ–≥–∏ cron/–ø–∞—Ä—Å–∏–Ω–≥–∞ (–µ—Å–ª–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Å–µ—Ä–≤–∏—Å–µ):
sudo docker compose logs -f parser
# –∏–ª–∏
sudo docker compose logs -f embeddings


–í–æ–π—Ç–∏ –≤ –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä PHP:
sudo docker compose exec app sh


üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ local.neon / –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è (doctrine/dbal / database.dsn –∏ —Ç.–¥.).

–ü–æ—Å–ª–µ —Å—Ç–∞—Ä—Ç–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ë–î –¥–æ—Å—Ç—É–ø–Ω–∞ –∏ –º–∏–≥—Ä–∞—Ü–∏–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å) –ø—Ä–∏–º–µ–Ω–µ–Ω—ã.

üß© –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

API-–∫–ª—é—á–∏ –∏ –ø—Ä–æ—á–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–¥–∞—é—Ç—Å—è –≤ local.neon (–∏–ª–∏ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è).
–ù–µ –∫–æ–º–º–∏—Ç—å—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–µ –∫–ª—é—á–∏ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π.


ü©∫ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: http://localhost
Selenium —Å—Ç–∞—Ç—É—Å:
sudo docker compose exec app curl -s http://selenium:4444/status

–ü—Ä–∞–≤–∞ –Ω–∞ –∫–∞—Ç–∞–ª–æ–≥–∏:
sudo chmod -R 0777 ./log ./temp ./www


‚ùì–¢—Ä–∞–±–ª—à—É—Ç–∏–Ω–≥

403/500/‚Äú—Ç–µ–º–ø –Ω–µ –ø–∏—à–µ—Ç—Å—è‚Äù ‚Üí –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ ./log, ./temp, ./www.

–ö—Ä–æ–Ω ‚Äú–Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç‚Äù ‚Üí —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∑–∞–ø—É—â–µ–Ω—ã (up -d), –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ parser/embeddings.

–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Ä–µ–∑—é–º–µ ‚Üí –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ app, –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –ø–∞—Ä—Å–µ—Ä–∞.

Selenium –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç ‚Üí –ø–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ—Ç—å docker –∏ —Å—Ç–∞—Ç—É—Å –ø–æ URL –≤—ã—à–µ.



üì¶ –î–µ–ø–ª–æ–π –Ω–∞ —Ö–æ—Å—Ç–∏–Ω–≥–µ/–ª–æ–∫–∞–ª—å–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ –±–µ–∑ Docker

–ù–∞—Å—Ç—Ä–æ–π—Ç–µ PHP + –≤–µ–±-—Å–µ—Ä–≤–µ—Ä (Apache/Nginx) –∏ –ë–î.

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (composer install).

–ü—Ä–æ–ø–∏—à–∏—Ç–µ –¥–æ—Å—Ç—É–ø—ã –∏ –∫–ª—é—á–∏ –≤ local.neon/env.

–í—ã–¥–∞–π—Ç–µ –ø—Ä–∞–≤–∞:
sudo chmod -R 0777 ./log ./temp ./www

–ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Å–∏—Å—Ç–µ–º–Ω—ã–π cron (–∏–ª–∏ Supervisor) –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞/–∑–∞–¥–∞—á –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é.